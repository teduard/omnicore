import{R as t,i as Pe,Q as Ne,y as Be,r as p,J as P,O as N,s as ke,t as $e,U as qe,z as ze,u as Ke,bC as Ue,l as je,a as He}from"./index-DhoDqbO4.js";import{u as Je,p as Qe,a as We,b as Ge,F as Xe,T as Ye,c as Ze,d as et,V as tt,P as nt,D as z,e as ot}from"./use-select-DpWPcQzn.js";const at={root:"awsui_root_r2vco_1yzpb_145"},lt=t.forwardRef(({options:a,filteringType:l="none",filteringPlaceholder:L,filteringAriaLabel:b,filteringClearAriaLabel:w,filteringResultsText:n,inlineLabelText:f,ariaRequired:g,placeholder:h,disabled:s,readOnly:c,ariaLabel:x,statusType:e="finished",empty:C,loadingText:E,finishedText:K,errorText:U,noMatch:j,triggerVariant:H="label",renderHighlightedAriaLive:J,selectedOption:v,onBlur:Q,onFocus:W,onLoadItems:I,onChange:G,virtualScroll:X,expandToViewport:Y,autoFocus:Z,__inFilteringToken:B,__internalRootRef:ee,renderOption:k,...d},te)=>{var D;const $=Pe(d),A=Ne(d),F=Be("select"),ne=F("errorIconAriaLabel",d.errorIconAriaLabel),oe=F("selectedAriaLabel",d.selectedAriaLabel),ae=F("recoveryText",d.recoveryText);d.recoveryText;const{handleLoadMore:le,handleRecoveryClick:re,fireLoadItems:ie}=Je({onLoadItems:I,options:a,statusType:e}),[m,se]=p.useState(""),{filteredOptions:r,parentMap:ce,totalCount:de,matchesCount:ue}=Qe(a,l,m),pe=p.useRef(null),ge=p.useRef(null),he=P("trigger"),T=(D=A.controlId)!==null&&D!==void 0?D:he,M=p.useRef(null),{isOpen:u,highlightType:be,highlightedOption:y,highlightedIndex:q,getTriggerProps:fe,getDropdownProps:ve,getFilterProps:me,getMenuProps:ye,getOptionProps:Oe,highlightOption:Se,selectOption:Re,announceSelected:Le,focusActiveRef:we}=We({selectedOptions:v?[v]:[],updateSelectedOption:o=>ze(G,{selectedOption:o}),options:r,filteringType:l,onBlur:Q,onFocus:W,externalRef:te,fireLoadItems:ie,setFilteringValue:se,statusType:e}),xe=Ge({isEnabled:l==="none"&&!c,options:r,highlightOption:u?Se:Re,highlightedOption:u?y?.option:v}),O=P("select-arialabel-"),S=P("footer");p.useEffect(()=>{var o;(o=M.current)===null||o===void 0||o.call(M,q)},[q]);const Ce=t.createElement(Xe,{clearAriaLabel:w,filteringType:l,placeholder:L,ariaLabel:b,ariaRequired:g,value:m,...me()}),Ee=t.createElement(Ye,{renderOption:k,ref:ge,placeholder:h,disabled:s,readOnly:c,triggerVariant:H,triggerProps:fe(s,Z),selectedOption:v,isOpen:u,inFilteringToken:B,inlineLabelText:f,...A,controlId:T,ariaLabelledby:N(A.ariaLabelledby,O)}),Ie=!a||a.length===0,De=r&&r.length===0,Ae=l!=="none"&&m.length>0&&r&&r.length>0?n?.(ue,de):void 0,i=Ze({statusType:e,empty:C,loadingText:E,finishedText:K,errorText:U,recoveryText:ae,isEmpty:Ie,isNoMatch:De,noMatch:j,filteringResultsText:Ae,errorIconAriaLabel:ne,onRecoveryClick:()=>{re(),we()},hasRecoveryCallback:!!I}),Fe={...ye(),onLoadMore:le,ariaLabelledby:N(O,T),ariaDescribedby:i.content?S:void 0},Te=et({announceSelected:Le,highlightedOption:y,getParent:o=>{var R;return(R=ce.get(o))===null||R===void 0?void 0:R.option},selectedAriaLabel:oe,renderHighlightedAriaLive:J}),Me=X?tt:nt,Ve=o=>{o.target!==document.activeElement&&o.preventDefault()},_e=ke(pe,ee),V=ve(),_=p.useRef(a.length>0);return _.current=_.current||a.length>0,t.createElement("div",{...$,ref:_e,className:$e(at.root,$.className),onKeyDown:xe},t.createElement(qe,{...V,ariaLabelledby:V.dropdownContentRole?N(O,T):void 0,ariaDescribedby:V.dropdownContentRole&&i.content?S:void 0,open:u,stretchTriggerHeight:!!B,stretchBeyondTriggerWidth:!0,trigger:Ee,header:Ce,onMouseDown:Ve,footer:i.isSticky?t.createElement(z,{content:u?i.content:null,id:S}):null,expandToViewport:Y,contentKey:_.current.toString(),content:t.createElement(Me,{listBottom:i.isSticky?null:t.createElement(z,{content:u?i.content:null,id:S}),renderOption:k,menuProps:Fe,getOptionProps:Oe,filteredOptions:r,filteringValue:m,ref:M,hasDropdownStatus:i.content!==null,screenReaderContent:Te,highlightType:be})}),t.createElement("div",{hidden:!0,id:O},x||f))}),rt=t.forwardRef(({options:a=[],filteringType:l="none",statusType:L="finished",triggerVariant:b="label",renderOption:w,...n},f)=>{var g,h,s,c;const x=Ke("Select",{props:{autoFocus:n.autoFocus,expandToViewport:n.expandToViewport,filteringType:l,triggerVariant:b,virtualScroll:n.virtualScroll,readOnly:n.readOnly},metadata:{hasInlineLabel:!!n.inlineLabelText,hasDisabledReasons:a.some(E=>!!E.disabledReason)}}),e=Ue(n),C={name:"awsui.Select",label:`.${ot["button-trigger"]}`,properties:{disabled:`${!!e.disabled}`,selectedOptionValue:`${e.selectedOption&&e.selectedOption.value?e.selectedOption.value:null}`,selectedOption:`${(c=(h=(g=e.selectedOption)===null||g===void 0?void 0:g.label)!==null&&h!==void 0?h:(s=e.selectedOption)===null||s===void 0?void 0:s.value)!==null&&c!==void 0?c:null}`}};return t.createElement(lt,{renderOption:w,options:a,filteringType:l,statusType:L,triggerVariant:b,...e,...x,ref:f,...je({component:C})})});He(rt,"Select");export{rt as S};
