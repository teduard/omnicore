import{f as K,R as e,n as j,i as Ne,q as ke,s as $e,r as h,t as _,v as B,w as qe,x as ze,y as Ke,z as je,A as He,l as Ue}from"./index-sD0I4hqL.js";import{C as We}from"./internal-vx42QX-X.js";import{u as Ge,p as Je,a as Qe,b as Xe,F as Ye,T as Ze,c as et,d as tt,V as nt,P as ot,D as z,e as at}from"./use-select-DG6QjcUe.js";function lt({locale:t="",isDateEnabled:o=()=>!0,granularity:c="day",...r}){const b=K("Calendar",{props:{granularity:c},metadata:{hasDisabledReasons:!!r.dateDisabledReason}});return e.createElement(We,{...r,...b,locale:t,isDateEnabled:o,granularity:c})}j(lt,"Calendar");const rt={root:"awsui_root_r2vco_1yzpb_145"},st=e.forwardRef(({options:t,filteringType:o="none",filteringPlaceholder:c,filteringAriaLabel:r,filteringClearAriaLabel:b,filteringResultsText:a,inlineLabelText:v,ariaRequired:f,placeholder:m,disabled:d,readOnly:u,ariaLabel:L,statusType:n="finished",empty:x,loadingText:E,finishedText:H,errorText:U,noMatch:W,triggerVariant:G="label",renderHighlightedAriaLive:J,selectedOption:y,onBlur:Q,onFocus:X,onLoadItems:D,onChange:Y,virtualScroll:Z,expandToViewport:ee,autoFocus:te,__inFilteringToken:N,__internalRootRef:ne,renderOption:k,...p},oe)=>{var I;const $=Ne(p),A=ke(p),F=$e("select"),ae=F("errorIconAriaLabel",p.errorIconAriaLabel),le=F("selectedAriaLabel",p.selectedAriaLabel),re=F("recoveryText",p.recoveryText);p.recoveryText;const{handleLoadMore:se,handleRecoveryClick:ie,fireLoadItems:ce}=Ge({onLoadItems:D,options:t,statusType:n}),[O,de]=h.useState(""),{filteredOptions:s,parentMap:ue,totalCount:pe,matchesCount:ge}=Je(t,o,O),he=h.useRef(null),be=h.useRef(null),fe=_("trigger"),T=(I=A.controlId)!==null&&I!==void 0?I:fe,M=h.useRef(null),{isOpen:g,highlightType:me,highlightedOption:R,highlightedIndex:q,getTriggerProps:ve,getDropdownProps:ye,getFilterProps:Oe,getMenuProps:Re,getOptionProps:Ce,highlightOption:Se,selectOption:we,announceSelected:Le,focusActiveRef:xe}=Qe({selectedOptions:y?[y]:[],updateSelectedOption:l=>je(Y,{selectedOption:l}),options:s,filteringType:o,onBlur:Q,onFocus:X,externalRef:oe,fireLoadItems:ce,setFilteringValue:de,statusType:n}),Ee=Xe({isEnabled:o==="none"&&!u,options:s,highlightOption:g?Se:we,highlightedOption:g?R?.option:y}),C=_("select-arialabel-"),S=_("footer");h.useEffect(()=>{var l;(l=M.current)===null||l===void 0||l.call(M,q)},[q]);const De=e.createElement(Ye,{clearAriaLabel:b,filteringType:o,placeholder:c,ariaLabel:r,ariaRequired:f,value:O,...Oe()}),Ie=e.createElement(Ze,{renderOption:k,ref:be,placeholder:m,disabled:d,readOnly:u,triggerVariant:G,triggerProps:ve(d,te),selectedOption:y,isOpen:g,inFilteringToken:N,inlineLabelText:v,...A,controlId:T,ariaLabelledby:B(A.ariaLabelledby,C)}),Ae=!t||t.length===0,Fe=s&&s.length===0,Te=o!=="none"&&O.length>0&&s&&s.length>0?a?.(ge,pe):void 0,i=et({statusType:n,empty:x,loadingText:E,finishedText:H,errorText:U,recoveryText:re,isEmpty:Ae,isNoMatch:Fe,noMatch:W,filteringResultsText:Te,errorIconAriaLabel:ae,onRecoveryClick:()=>{ie(),xe()},hasRecoveryCallback:!!D}),Me={...Re(),onLoadMore:se,ariaLabelledby:B(C,T),ariaDescribedby:i.content?S:void 0},Ve=tt({announceSelected:Le,highlightedOption:R,getParent:l=>{var w;return(w=ue.get(l))===null||w===void 0?void 0:w.option},selectedAriaLabel:le,renderHighlightedAriaLive:J}),Pe=Z?nt:ot,_e=l=>{l.target!==document.activeElement&&l.preventDefault()},Be=qe(he,ne),V=ye(),P=h.useRef(t.length>0);return P.current=P.current||t.length>0,e.createElement("div",{...$,ref:Be,className:ze(rt.root,$.className),onKeyDown:Ee},e.createElement(Ke,{...V,ariaLabelledby:V.dropdownContentRole?B(C,T):void 0,ariaDescribedby:V.dropdownContentRole&&i.content?S:void 0,open:g,stretchTriggerHeight:!!N,stretchBeyondTriggerWidth:!0,trigger:Ie,header:De,onMouseDown:_e,footer:i.isSticky?e.createElement(z,{content:g?i.content:null,id:S}):null,expandToViewport:ee,contentKey:P.current.toString(),content:e.createElement(Pe,{listBottom:i.isSticky?null:e.createElement(z,{content:g?i.content:null,id:S}),renderOption:k,menuProps:Me,getOptionProps:Ce,filteredOptions:s,filteringValue:O,ref:M,hasDropdownStatus:i.content!==null,screenReaderContent:Ve,highlightType:me})}),e.createElement("div",{hidden:!0,id:C},L||v))}),it=e.forwardRef(({options:t=[],filteringType:o="none",statusType:c="finished",triggerVariant:r="label",renderOption:b,...a},v)=>{var f,m,d,u;const L=K("Select",{props:{autoFocus:a.autoFocus,expandToViewport:a.expandToViewport,filteringType:o,triggerVariant:r,virtualScroll:a.virtualScroll,readOnly:a.readOnly},metadata:{hasInlineLabel:!!a.inlineLabelText,hasDisabledReasons:t.some(E=>!!E.disabledReason)}}),n=He(a),x={name:"awsui.Select",label:`.${at["button-trigger"]}`,properties:{disabled:`${!!n.disabled}`,selectedOptionValue:`${n.selectedOption&&n.selectedOption.value?n.selectedOption.value:null}`,selectedOption:`${(u=(m=(f=n.selectedOption)===null||f===void 0?void 0:f.label)!==null&&m!==void 0?m:(d=n.selectedOption)===null||d===void 0?void 0:d.value)!==null&&u!==void 0?u:null}`}};return e.createElement(st,{renderOption:b,options:t,filteringType:o,statusType:c,triggerVariant:r,...n,...L,ref:v,...Ue({component:x})})});j(it,"Select");export{lt as C,it as S};
