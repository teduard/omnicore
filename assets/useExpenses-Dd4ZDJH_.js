import{r as f,ax as Fe,R as i,m as Z,M as we,aI as Ge,k as We,bs as je,U as Ue,ak as K,aD as qe,Y as _e,p as Ze,i as $e,w as ze,q as Ve,bt as Je,bu as Qe,bv as ce,bw as Xe,bx as Ee,ae as $,by as et,bz as tt,bA as F,a as Pe,bB as Se,bC as X,l as Q}from"./index-BNmEPKmQ.js";function le(e,t){return e.padStart(t,"0")}function Y(e){"@babel/helpers - typeof";return Y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y(e)}function z(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function M(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function b(e){M(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||Y(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function de(e,t){M(2,arguments);var n=b(e),r=z(t);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function H(e,t){M(2,arguments);var n=b(e),r=z(t);if(isNaN(r))return new Date(NaN);if(!r)return n;var a=n.getDate(),s=new Date(n.getTime());s.setMonth(n.getMonth()+r+1,0);var o=s.getDate();return a>=o?s:(n.setFullYear(s.getFullYear(),s.getMonth(),a),n)}function fe(e){M(1,arguments);var t=b(e);return t.setHours(0,0,0,0),t}function nt(e,t){M(2,arguments);var n=z(t);return H(e,n*12)}function he(e,t){M(2,arguments);var n=b(e),r=b(t),a=n.getTime()-r.getTime();return a<0?-1:a>0?1:a}function rt(e,t){M(2,arguments);var n=fe(e),r=fe(t);return n.getTime()===r.getTime()}function at(e,t){M(2,arguments);var n=b(e),r=b(t);return n.getFullYear()-r.getFullYear()}function Ie(e,t){M(2,arguments);var n=b(e),r=b(t),a=he(n,r),s=Math.abs(at(n,r));n.setFullYear(1584),r.setFullYear(1584);var o=he(n,r)===-a,c=a*(s-Number(o));return c===0?0:c}function st(e){M(1,arguments);var t=b(e);return t.setDate(1),t.setHours(0,0,0,0),t}function ot(e){M(1,arguments);var t=b(e),n=new Date(0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function it(e,t){if(Y(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Y(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ut(e){var t=it(e,"string");return Y(t)=="symbol"?t:t+""}function ct(e,t,n){return(t=ut(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e,t){M(2,arguments);var n=b(e),r=b(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function ee(e,t){M(2,arguments);var n=b(e),r=b(t);return n.getFullYear()===r.getFullYear()}function lt(e,t){M(2,arguments);var n=z(t);return H(e,-n)}function me(){const e=f.useRef(new Map);return t=>{const n=e.current.get(t.getTime());return n||(e.current.set(t.getTime(),t),t)}}function dt(e,t="day"){const n=e.getFullYear(),r=le(`${e.getMonth()+1}`,2);if(t==="month")return`${n}-${r}`;const a=le(`${e.getDate()}`,2);return`${n}-${r}-${a}`}function ft(e,t=!1){const[n,r,a]=e.split("-"),s=Number(n),o=Number(r),c=Number(a);return t&&(isNaN(s)||isNaN(o)||isNaN(c))?null:new Date(s,(o||1)-1,c||1)}function ge(e,t){return e.length===2&&t.indexOf(e)===0?t:e}function ht(e,t){var n;t=pe(e,t);const r=gt();if(t)return ge(t,r);const a=pe(e,(n=mt())===null||n===void 0?void 0:n.getAttribute("lang"));return a?ge(a,r):r}function pe(e,t){return!t||t===""?"":(t=t&&t.replace(/^([a-z]{2})_/,"$1-"),t&&!t.match(/^[a-z]{2}(-[A-Z]{2})?$/)&&(t=""),t)}function mt(){return typeof document<"u"?document.querySelector("html"):null}function gt(){return new Intl.DateTimeFormat().resolvedOptions().locale}function pt(e,t){var n=t[typeof e=="string"?e.toUpperCase():e];return typeof n=="number"?n:1}function yt(e,t,n){if(e){var r=e.toLowerCase().split(/[-_]/),a=r[0],s;if(r[1]&&r[1].length===4?(a+="_"+r[1],s=r[2]):s=r[1],s||(s=t[a]),s)return pt(s.match(/^\d+$/)?Number(s):s,n)}return 1}var vt={en:"US",zh:"CN",zh_hans:"CN",hans:"CN",wuu:"CN",hsn:"CN",hak:"CN",nan:"CN",gan:"CN",hi:"IN",te:"IN",mr:"IN",ta:"IN",gu:"IN",kn:"IN",or:"IN",ml:"IN",pa_guru:"IN",bho:"IN",awa:"IN",as:"IN",mwr:"IN",mai:"IN",mag:"IN",bgc:"IN",hne:"IN",dcc:"IN",dz:"BT",tn:"BW",am:"ET",om:"ET",quc:"GT",id:"ID",jv:"ID",su:"ID",mad:"ID",ms_arab:"ID",ga:"IE",he:"IL",jam:"JM",ja:"JP",km:"KH",ko:"KR",lo:"LA",mh:"MH",my:"MM",mt:"MT",ne:"NP",fil:"PH",ceb:"PH",ilo:"PH",ur:"PK",pa:"PK",pa_arab:"PK",arab:"PK",lah:"PK",ps:"PK",sd:"PK",sd_arab:"PK",skr:"PK",gn:"PY",th:"TH",tts:"TH",aeb:"TN",zh_hant:"TW",hant:"TW",sm:"WS",zu:"ZA",sn:"ZW",arq:"DZ",ar:"EG",arz:"EG",fa:"IR",az_arab:"IR",ary:"MA",bn:"BD",rkt:"BD",dv:"MV"},bt={AG:0,ATG:0,28:0,AR:0,ARG:0,32:0,AS:0,ASM:0,16:0,AU:0,AUS:0,36:0,BR:0,BRA:0,76:0,BS:0,BHS:0,44:0,BT:0,BTN:0,64:0,BW:0,BWA:0,72:0,BZ:0,BLZ:0,84:0,CA:0,CAN:0,124:0,CN:0,CHN:0,156:0,CO:0,COL:0,170:0,DM:0,DMA:0,212:0,DO:0,DOM:0,214:0,ET:0,ETH:0,231:0,GT:0,GTM:0,320:0,GU:0,GUM:0,316:0,HK:0,HKG:0,344:0,HN:0,HND:0,340:0,ID:0,IDN:0,360:0,IE:0,IRL:0,372:0,IL:0,ISR:0,376:0,IN:0,IND:0,356:0,JM:0,JAM:0,388:0,JP:0,JPN:0,392:0,KE:0,KEN:0,404:0,KH:0,KHM:0,116:0,KR:0,KOR:0,410:0,LA:0,LA0:0,418:0,MH:0,MHL:0,584:0,MM:0,MMR:0,104:0,MO:0,MAC:0,446:0,MT:0,MLT:0,470:0,MX:0,MEX:0,484:0,MZ:0,MOZ:0,508:0,NI:0,NIC:0,558:0,NP:0,NPL:0,524:0,NZ:0,NZL:0,554:0,PA:0,PAN:0,591:0,PE:0,PER:0,604:0,PH:0,PHL:0,608:0,PK:0,PAK:0,586:0,PR:0,PRI:0,630:0,PY:0,PRY:0,600:0,SA:0,SAU:0,682:0,SG:0,SGP:0,702:0,SV:0,SLV:0,222:0,TH:0,THA:0,764:0,TN:0,TUN:0,788:0,TT:0,TTO:0,780:0,TW:0,TWN:0,158:0,UM:0,UMI:0,581:0,US:0,USA:0,840:0,VE:0,VEN:0,862:0,VI:0,VIR:0,850:0,WS:0,WSM:0,882:0,YE:0,YEM:0,887:0,ZA:0,ZAF:0,710:0,ZW:0,ZWE:0,716:0,AE:6,ARE:6,784:6,AF:6,AFG:6,4:6,BH:6,BHR:6,48:6,DJ:6,DJI:6,262:6,DZ:6,DZA:6,12:6,EG:6,EGY:6,818:6,IQ:6,IRQ:6,368:6,IR:6,IRN:6,364:6,JO:6,JOR:6,400:6,KW:6,KWT:6,414:6,LY:6,LBY:6,434:6,MA:6,MAR:6,504:6,OM:6,OMN:6,512:6,QA:6,QAT:6,634:6,SD:6,SDN:6,729:6,SY:6,SYR:6,760:6,BD:5,BGD:5,50:5,MV:5,MDV:5,462:5};function Dt(e){return yt(e,vt,bt)}function Mt(e,t){return typeof e=="number"?e%7:Dt(t)}const d={calendar:"awsui_calendar_1ykar_1p0hg_153",root:"awsui_root_1ykar_1p0hg_180","calendar-inner":"awsui_calendar-inner_1ykar_1p0hg_218","calendar-header":"awsui_calendar-header_1ykar_1p0hg_222","calendar-header-title":"awsui_calendar-header-title_1ykar_1p0hg_227","calendar-next-btn":"awsui_calendar-next-btn_1ykar_1p0hg_235","calendar-prev-btn":"awsui_calendar-prev-btn_1ykar_1p0hg_238","calendar-grid":"awsui_calendar-grid_1ykar_1p0hg_241","calendar-grid-dense":"awsui_calendar-grid-dense_1ykar_1p0hg_245","calendar-grid-cell":"awsui_calendar-grid-cell_1ykar_1p0hg_253","calendar-date-header":"awsui_calendar-date-header_1ykar_1p0hg_258","calendar-date":"awsui_calendar-date_1ykar_1p0hg_258","calendar-date-enabled":"awsui_calendar-date-enabled_1ykar_1p0hg_278","calendar-date-current-page":"awsui_calendar-date-current-page_1ykar_1p0hg_288","calendar-date-selected":"awsui_calendar-date-selected_1ykar_1p0hg_299","calendar-date-current":"awsui_calendar-date-current_1ykar_1p0hg_288","calendar-date-dense":"awsui_calendar-date-dense_1ykar_1p0hg_320","date-inner":"awsui_date-inner_1ykar_1p0hg_328","calendar-row":"awsui_calendar-row_1ykar_1p0hg_403","disabled-reason-tooltip":"awsui_disabled-reason-tooltip_1ykar_1p0hg_407"},Ce=f.forwardRef((e,t)=>{const{disabledReason:n,...r}=e,a=!!n,{targetProps:s,descriptionEl:o}=Ge(n),c=f.useRef(null),[h,l]=f.useState(!1);return i.createElement("td",{ref:We(t,c),...a?s:{},...r,onFocus:()=>a?l(!0):void 0,onBlur:()=>a?l(!1):void 0,onMouseEnter:()=>a?l(!0):void 0,onMouseLeave:()=>a?l(!1):void 0},e.children,a&&i.createElement(i.Fragment,null,o,h&&i.createElement(je,{className:d["disabled-reason-tooltip"],getTrack:()=>c.current,content:n,onEscape:()=>l(!1)})))});Ue(Ce,"GridCell");function Nt({isDateEnabled:e,dateDisabledReason:t,focusedDate:n,focusableDate:r,onSelectDate:a,selectedDate:s,ariaLabelledby:o,header:c,rows:h,isCurrentPage:l,renderDate:D,renderDateAnnouncement:N,isSameDate:w,onGridKeyDownHandler:g}){const p=f.useRef(null);Fe(()=>{n&&p.current&&p.current.focus()},[n]);const y=h[0].length>3;return i.createElement("table",{role:"grid",className:Z(d["calendar-grid"],y&&d["calendar-grid-dense"]),"aria-labelledby":o},c,i.createElement("tbody",{onKeyDown:g},h.map((m,I)=>i.createElement("tr",{key:I,className:d["calendar-row"]},m.map((v,O)=>{const V=!!r&&w(v,r),j=!!s&&w(v,s),E=!e||e(v),_=t(v),B=!E&&!!_,R=w(v,new Date);let C;return V&&(E||B)?C=0:(E||B)&&(C=-1),i.createElement(Ce,{key:`${I}:${O}`,ref:C===0?p:void 0,tabIndex:C,"aria-current":R?"date":void 0,"aria-selected":E?j:void 0,"aria-disabled":!E,onClick:E?()=>a(v):void 0,className:Z(d["calendar-grid-cell"],d["calendar-date"],{[d["calendar-date-current-page"]]:l(v),[d["calendar-date-enabled"]]:E,[d["calendar-date-selected"]]:j,[d["calendar-date-current"]]:R,[d["calendar-date-dense"]]:y}),disabledReason:B?_:void 0},i.createElement("span",{className:d["date-inner"],"aria-hidden":"true"},D(v)),i.createElement(we,null,N(v,R)))})))))}function wt(e,t){const n=t-e.getDay();e.setDate(e.getDate()+n)}function ye(e,t,n){const r=new Date;return wt(r,t),r.toLocaleDateString(e,{weekday:n})}function ve(e,t){return t.toLocaleDateString(e,{year:"numeric",month:"long"})}function Jt(e,t){return t.toLocaleDateString(e,{year:"numeric"})}const be=new Map;function _t(e,t,n="full"){const r=e+t.getTime()+n,a=be.get(r);if(a)return a;const s=t.toLocaleDateString(e,{weekday:n==="full"?"long":void 0,month:"long",day:"numeric",year:"numeric"});return be.set(r,s),s}function Et({locale:e,rows:t}){return i.createElement("thead",null,i.createElement("tr",null,t[0].map(n=>n.getDay()).map(n=>i.createElement("th",{key:n,scope:"col",className:Z(d["calendar-grid-cell"],d["calendar-date-header"])},i.createElement("span",{"aria-hidden":"true"},ye(e,n,"short")),i.createElement(we,null,ye(e,n,"long"))))))}function Pt(e,t){return G(e,t,1)}function St(e,t){return G(e,t,-1)}function It(e,t){return G(e,t,7)}function Ct(e,t){return G(e,t,-7)}function Lt(e,t){const n=st(e);if(t(n))return n;const r=G(n,t,1);return L(n,r)?r:n}function G(e,t,n){let a=de(e,n);for(;!t(a);){if(Math.abs(Ie(e,a))>1)return e;a=de(a,n)}return a}function At(e,t){return W(e,t,1)}function Ot(e,t){return W(e,t,-1)}function Rt(e,t){return W(e,t,3)}function Tt(e,t){return W(e,t,-3)}function kt(e,t){const n=ot(e);if(t(n))return n;const r=W(n,t,1);return ee(n,r)?r:n}function W(e,t,n){let a=H(e,n);for(;!t(a);){if(Math.abs(Ie(e,a))>10)return e;a=H(a,n)}return a}function xt({baseDate:e,focusableDate:t,granularity:n,isDateEnabled:r,isDateFocusable:a,onChangePage:s,onFocusDate:o,onSelectDate:c}){const h=n==="month",l=h?Rt:It,D=h?Ot:St,N=h?At:Pt,w=h?Tt:Ct,g=h?ee:L;return S=>{let y;const m=[K.up,K.down,K.left,K.right,K.space,K.enter];t===null||m.indexOf(S.keyCode)===-1||(S.preventDefault(),qe(S,{onActivate:()=>{r(t)&&(o(null),c(t))},onBlockEnd:()=>y=l(t,a),onBlockStart:()=>y=w(t,a),onInlineStart:()=>y=D(t,a),onInlineEnd:()=>y=N(t,a)}),y&&(g(y,e)||s(y),o(y)))}}var De=function(t,n){var r=new Date(t);return r.setDate(r.getDate()+n),r},Kt=function(t,n){var r=new Date(t);return r.setDate(n),r};function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Yt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Me(Object(n),!0).forEach(function(r){ct(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var q=7,te=function(t,n){for(var r=Yt({firstDayOfWeek:1},n),a=r.firstDayOfWeek,s=new Date(t.getFullYear(),t.getMonth(),1),o=new Date(t.getFullYear(),t.getMonth()+1,0),c=s.getDay(),h=o.getDay(),l=o.getDate(),D=(c-a+q)%q,N=(q-1-h+a)%q,w=[],g=[],p=1-D;p<=l+N+1;p++)p<=0?g.push(De(s,p-1)):p>l?g.push(De(o,p-l)):g.push(Kt(t,p)),g.length===7&&(w.push(g),g=[]);return w};function Ht(e){const t=e.getFullYear();return new Array(4).fill(0).map((n,r)=>new Array(3).fill(0).map((a,s)=>new Date(t,r*3+s)))}function Bt(e,{startOfWeek:t,padDates:n}){switch(n){case"before":return[...Ft(e,t),...Ne(e,t)].slice(-6);case"after":return[...Ne(e,t),...Gt(e,t)].slice(0,6)}}function Ne(e,t){return te(e,{firstDayOfWeek:t})}function Ft(e,t){const n=te(lt(e,1),{firstDayOfWeek:t}),r=n[n.length-1][n[n.length-1].length-1];return L(e,r)?n.slice(0,-1):n}function Gt(e,t){const n=te(H(e,1),{firstDayOfWeek:t}),r=n[0][0];return L(e,r)?n.slice(1):n}function Wt({baseDate:e,granularity:t,locale:n,startOfWeek:r}){const a=t==="month";return f.useMemo(()=>{if(a)return Ht(e);{const o=Mt(r,n);return Bt(e,{startOfWeek:o,padDates:"after"})}},[e,a,r,n])}function jt({ariaLabel:e,onChange:t}){return i.createElement(_e,{iconName:"angle-left",ariaLabel:e,variant:"icon",onClick:()=>t(-1),formAction:"none",className:d["calendar-prev-btn"]})}function Ut({ariaLabel:e,onChange:t}){return i.createElement(_e,{iconName:"angle-right",ariaLabel:e,variant:"icon",onClick:()=>t(1),formAction:"none",className:d["calendar-next-btn"]})}const qt=({formattedDate:e,onChange:t,previousLabel:n,nextLabel:r,headingId:a})=>i.createElement("div",{className:d["calendar-header"]},i.createElement(jt,{ariaLabel:n,onChange:t}),i.createElement("h2",{className:d["calendar-header-title"],id:a},e),i.createElement(Ut,{ariaLabel:r,onChange:t}));function Zt({granularity:e,locale:t,i18nStrings:n,previousMonthAriaLabel:r,nextMonthAriaLabel:a,todayAriaLabel:s}){var o,c,h;const l=Ze("calendar"),D=e==="month",N=D?l("i18nStrings.previousYearAriaLabel",n?.previousYearAriaLabel):l("previousMonthAriaLabel",(o=n?.previousMonthAriaLabel)!==null&&o!==void 0?o:r),w=D?l("i18nStrings.nextYearAriaLabel",n?.nextYearAriaLabel):l("nextMonthAriaLabel",(c=n?.nextMonthAriaLabel)!==null&&c!==void 0?c:a),g=D?l("i18nStrings.currentMonthAriaLabel",n?.currentMonthAriaLabel):l("todayAriaLabel",(h=n?.todayAriaLabel)!==null&&h!==void 0?h:s);return{previousButtonLabel:N,nextButtonLabel:w,renderDate:m=>D?m.toLocaleString(t,{month:"short"}):m.getDate().toString(),renderDateAnnouncement:(m,I)=>{const v=D?ve(t,m):_t(t,m,"short");return I&&g?v+". "+g:v},renderHeaderText:m=>D?m.getFullYear().toString():ve(t,m)}}function Qt({value:e,locale:t="",startOfWeek:n,isDateEnabled:r=()=>!0,dateDisabledReason:a=()=>"",ariaLabel:s,ariaLabelledby:o,ariaDescribedby:c,onChange:h,__internalRootRef:l,i18nStrings:D,granularity:N="day",previousMonthAriaLabel:w,nextMonthAriaLabel:g,todayAriaLabel:p,...S}){const y=$e(S),m=ht("Calendar",t),I=f.useRef(null),[v,O]=f.useState(null),V=me(),j=me(),E=e&&e.length>=4?ft(e):null,_=E&&!isNaN(E.getDate())?V(E):null,B=_??new Date,[R,C]=f.useState(B),re=ze("calendar-heading"),T=N==="month",U=u=>r(u)||!r(u)&&!!a(u),k=T?kt(R,r):Lt(R,r),Le=T?L:rt,ae=T?ee:L,Ae=u=>T||L(u,k),{previousButtonLabel:Oe,nextButtonLabel:Re,renderDate:Te,renderDateAnnouncement:ke,renderHeaderText:xe}=Zt({granularity:N,i18nStrings:D,locale:m,previousMonthAriaLabel:w,nextMonthAriaLabel:g,todayAriaLabel:p}),se=Wt({baseDate:k,granularity:N,startOfWeek:n,locale:m});f.useEffect(()=>{_&&C(u=>u.getTime()!==_.getTime()?_:u)},[_]);const oe=v||((u,P)=>{if(u&&U(u)&&ae(u,P))return u;const x=new Date;return U(x)&&ae(x,P)?x:U(P)?P:null})(_,k),Ke=u=>{const x=(T?nt:H)(k,u);J(x)},J=u=>{C(u),O(null)},ie=u=>{u&&O(u?j(u):null)},ue=u=>{Ve(h,{value:dt(u,N)}),O(null)},Ye=u=>{var P;u.relatedTarget&&(!((P=I.current)===null||P===void 0)&&P.contains(u.relatedTarget))||O(null)},He=xt({baseDate:k,focusableDate:oe,granularity:N,isDateEnabled:r,isDateFocusable:U,onChangePage:J,onFocusDate:ie,onSelectDate:ue}),Be=xe(k);return i.createElement("div",{ref:l,...y,role:"group","aria-label":s,"aria-labelledby":o,"aria-describedby":c,className:Z(d.root,d.calendar,y.className)},i.createElement("div",{className:d["calendar-inner"]},i.createElement(qt,{formattedDate:Be,onChange:Ke,previousLabel:Oe,nextLabel:Re,headingId:re}),i.createElement("div",{onBlur:Ye,ref:I},i.createElement(Nt,{isDateEnabled:r,dateDisabledReason:a,focusedDate:v,focusableDate:oe,onSelectDate:ue,onFocusDate:ie,onChangePage:J,selectedDate:_,ariaLabelledby:re,header:T?null:i.createElement(Et,{locale:m,rows:se}),rows:se,isCurrentPage:Ae,renderDate:Te,renderDateAnnouncement:ke,isSameDate:Le,onGridKeyDownHandler:He}))))}var $t=class extends Je{#t;#r=void 0;#e;#n;constructor(e,t){super(),this.#t=e,this.setOptions(t),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const t=this.options;this.options=this.#t.defaultMutationOptions(e),Qe(this.options,t)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#e,observer:this}),t?.mutationKey&&this.options.mutationKey&&ce(t.mutationKey)!==ce(this.options.mutationKey)?this.reset():this.#e?.state.status==="pending"&&this.#e.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#e?.removeObserver(this)}onMutationUpdate(e){this.#a(),this.#s(e)}getCurrentResult(){return this.#r}reset(){this.#e?.removeObserver(this),this.#e=void 0,this.#a(),this.#s()}mutate(e,t){return this.#n=t,this.#e?.removeObserver(this),this.#e=this.#t.getMutationCache().build(this.#t,this.options),this.#e.addObserver(this),this.#e.execute(e)}#a(){const e=this.#e?.state??Xe();this.#r={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#s(e){Ee.batch(()=>{if(this.#n&&this.hasListeners()){const t=this.#r.variables,n=this.#r.context,r={client:this.#t,meta:this.options.meta,mutationKey:this.options.mutationKey};if(e?.type==="success"){try{this.#n.onSuccess?.(e.data,t,n,r)}catch(a){Promise.reject(a)}try{this.#n.onSettled?.(e.data,null,t,n,r)}catch(a){Promise.reject(a)}}else if(e?.type==="error"){try{this.#n.onError?.(e.error,t,n,r)}catch(a){Promise.reject(a)}try{this.#n.onSettled?.(void 0,e.error,t,n,r)}catch(a){Promise.reject(a)}}}this.listeners.forEach(t=>{t(this.#r)})})}};function ne(e,t){const n=$(),[r]=f.useState(()=>new $t(n,e));f.useEffect(()=>{r.setOptions(e)},[r,e]);const a=f.useSyncExternalStore(f.useCallback(o=>r.subscribe(Ee.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),s=f.useCallback((o,c)=>{r.mutate(o,c).catch(et)},[r]);if(a.error&&tt(r.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:s,mutateAsync:a.mutate}}const A={all:()=>["expenses"],byMonth:e=>["expenses",e]},Xt=e=>{const t=f.useContext(F),{service:n}=t,{isReady:r}=Pe();return Se({queryKey:A.byMonth(e),queryFn:async()=>await n.getExpenses(e),enabled:r,refetchOnWindowFocus:!1,staleTime:1/0})},en=()=>{const e=f.useContext(F),{service:t}=e,n=$();return ne({mutationFn:r=>t.addExpense(r),onSuccess:()=>{n.invalidateQueries({queryKey:A.all()}),X(A.all())}})},tn=e=>{const{service:t}=f.useContext(F),{isReady:n}=Pe();return Se({queryKey:["expense",e],queryFn:()=>t.getExpenseById(e),enabled:n&&e>0,staleTime:1/0})},nn=()=>{const{service:e}=f.useContext(F),t=$();return ne({mutationFn:n=>(Q.debug("edit payload = ",n),e.updateExpense(n)),onSuccess:()=>{t.invalidateQueries({queryKey:A.all()}),X(A.all())}})},rn=()=>{const e=f.useContext(F),{service:t}=e,n=$();return ne({mutationFn:r=>(Q.debug("mutationFN"),t.deleteExpense(r)),onSuccess:()=>{Q.debug("invalidate query"),n.invalidateQueries({queryKey:A.all()}),X(A.all())}})};export{Qt as C,Y as _,Xt as a,rn as b,z as c,ft as d,ve as e,Jt as f,_t as g,tn as h,nn as i,ht as n,le as p,M as r,b as t,en as u};
