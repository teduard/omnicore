import{r as a,j as e,L as M,F as O,a as H,C as I,S as f,b as l,I as g,T as z,H as N,B as j,u as V,c as Y,E as v,M as P,d as R,e as G}from"./index-Dz3i6rf-.js";import{S as J,C as _}from"./index-NYm1Yfqn.js";import{E as $}from"./ExpenseLayout-DywuebGD.js";import"./internal-DaqPnNpa.js";import"./use-select-Bn8yTUzk.js";function q(){const[s,n]=a.useState(""),[r,C]=a.useState(""),[S,F]=a.useState([{type:"info",dismissible:!0,dismissLabel:"Dismiss message",onDismiss:()=>F([]),content:e.jsxs(e.Fragment,{children:["Your new expense was added"," ",e.jsx(M,{color:"inverted",href:"/expense",children:"see all expenses"}),"."]}),id:"added_expense"}]),y=t=>{C(parseFloat(t.detail.value).toString()),console.log(t)},A=t=>{n(t.detail.value)},o=new Date,[c,E]=a.useState(o.getFullYear()+"-"+(o.getMonth()<9?"0"+(o.getMonth()+1):o.getMonth()+1)+"-"+o.getDate()),[u,k]=a.useState(!1),[h,B]=a.useState({label:"Food",value:"3"}),[i,m]=a.useState("idle"),w=t=>{t.preventDefault();const b={Amount:parseFloat(r),Category:parseInt(h.value),Comment:s,Date:c,CouldHaveBeenAvoided:u};console.log("payload:",b);const T="http://localhost:9080/api/expense";m("fetching"),fetch(T,{method:"POST",body:JSON.stringify(b),headers:new Headers({"content-type":"application/json"}),credentials:"include"}).then(d=>d.text()).then(d=>{console.log("answer from server:",d),m("ok")})},[D,p]=a.useState(!1),[L,x]=a.useState(!1);return a.useEffect(()=>{x(i==="fetching"),p(i==="ok")},[i]),e.jsxs(e.Fragment,{children:[D&&e.jsx(O,{items:S}),e.jsx("form",{onSubmit:w,children:e.jsx(H,{actions:e.jsxs(f,{direction:"horizontal",size:"xs",children:[e.jsx(j,{formAction:"none",variant:"link",children:"Cancel"}),e.jsx(j,{variant:"primary",loading:L,children:"Add"})]}),children:e.jsx(I,{header:e.jsx(N,{variant:"h2",children:"New expense"}),children:e.jsxs(f,{direction:"vertical",size:"l",children:[e.jsx(l,{label:"Amount",children:e.jsx(g,{type:"number",value:r.toString(),onChange:y,placeholder:"0"})}),e.jsx(l,{label:"Category",children:e.jsx(J,{selectedOption:h,onChange:({detail:t})=>B(t.selectedOption),options:[{label:"Clothes",value:"1"},{label:"Electronics",value:"2"},{label:"Food",value:"3"},{label:"House",value:"4"},{label:"Misc",value:"5"},{label:"Out",value:"6"},{label:"Personal Care",value:"7"},{label:"Transport",value:"8"},{label:"TransportCar",value:"9"},{label:"TranaportCarFuel",value:"10"}]})}),e.jsx(l,{label:"Comment",children:e.jsx(g,{value:s,onChange:A})}),e.jsx(l,{label:"Could have been avoided",children:e.jsx(z,{onChange:({detail:t})=>k(t.checked),checked:u,children:"Yes"})}),e.jsx(l,{label:"Entry Date",children:e.jsx(_,{onChange:({detail:t})=>{console.log("calendar:",t),E(t.value)},value:c})})]})})})})]})}function K(){const[s,n]=a.useState(P.Light),r={tokens:{colorBackgroundLayoutMain:{light:"white",dark:"blue"},colorTextAccent:"#0073bb"},contexts:{"top-navigation":{tokens:{colorBackgroundContainerContent:"#1e324f"}}}};return a.useEffect(()=>{R(s),G({theme:r})},[s]),e.jsx(e.Fragment,{children:e.jsx(q,{})})}function Q(){const s=V();return e.jsx(Y,{items:[{text:"Dashboard",href:v.path},{text:"Add expense",href:`${v.path}/add`}],expandAriaLabel:"Show path",ariaLabel:"Breadcrumbs",onFollow:n=>{n.detail.external||(n.preventDefault(),s(n.detail.href))}})}function te(){return e.jsx($,{content:e.jsx(K,{}),breadcrumbs:e.jsx(Q,{})})}export{te as default};
