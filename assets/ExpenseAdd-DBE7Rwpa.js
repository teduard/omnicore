import{r as a,j as e,L as M,C as O,S as b,H,B as g,u as I,a as z,E as j,M as N,b as V}from"./index-Bj2MUn9q.js";import{a as Y}from"./index-28g6udv-.js";import{F as P,a as R,I as v}from"./index-Cp1-mWVn.js";import{F as l}from"./index-Ccz6MWjI.js";import{S as G,C as J}from"./index-CD5wQho1.js";import{T as _}from"./index-D2IAMnqL.js";import{E as $}from"./ExpenseLayout-DQHk7F6L.js";import"./internal-CSiE5gFz.js";import"./use-select-xZE1YDyp.js";function q(){const[s,n]=a.useState(""),[r,C]=a.useState(""),[S,F]=a.useState([{type:"info",dismissible:!0,dismissLabel:"Dismiss message",onDismiss:()=>F([]),content:e.jsxs(e.Fragment,{children:["Your new expense was added"," ",e.jsx(M,{color:"inverted",href:"/expense",children:"see all expenses"}),"."]}),id:"added_expense"}]),y=t=>{C(parseFloat(t.detail.value).toString()),console.log(t)},A=t=>{n(t.detail.value)},o=new Date,[c,E]=a.useState(o.getFullYear()+"-"+(o.getMonth()<9?"0"+(o.getMonth()+1):o.getMonth()+1)+"-"+o.getDate()),[u,k]=a.useState(!1),[h,B]=a.useState({label:"Food",value:"3"}),[i,m]=a.useState("idle"),w=t=>{t.preventDefault();const f={Amount:parseFloat(r),Category:parseInt(h.value),Comment:s,Date:c,CouldHaveBeenAvoided:u};console.log("payload:",f);const T="http://localhost:9080/api/expense";m("fetching"),fetch(T,{method:"POST",body:JSON.stringify(f),headers:new Headers({"content-type":"application/json"}),credentials:"include"}).then(d=>d.text()).then(d=>{console.log("answer from server:",d),m("ok")})},[D,p]=a.useState(!1),[L,x]=a.useState(!1);return a.useEffect(()=>{x(i==="fetching"),p(i==="ok")},[i]),e.jsxs(e.Fragment,{children:[D&&e.jsx(P,{items:S}),e.jsx("form",{onSubmit:w,children:e.jsx(R,{actions:e.jsxs(b,{direction:"horizontal",size:"xs",children:[e.jsx(g,{formAction:"none",variant:"link",children:"Cancel"}),e.jsx(g,{variant:"primary",loading:L,children:"Add"})]}),children:e.jsx(O,{header:e.jsx(H,{variant:"h2",children:"New expense"}),children:e.jsxs(b,{direction:"vertical",size:"l",children:[e.jsx(l,{label:"Amount",children:e.jsx(v,{type:"number",value:r.toString(),onChange:y,placeholder:"0"})}),e.jsx(l,{label:"Category",children:e.jsx(G,{selectedOption:h,onChange:({detail:t})=>B(t.selectedOption),options:[{label:"Clothes",value:"1"},{label:"Electronics",value:"2"},{label:"Food",value:"3"},{label:"House",value:"4"},{label:"Misc",value:"5"},{label:"Out",value:"6"},{label:"Personal Care",value:"7"},{label:"Transport",value:"8"},{label:"TransportCar",value:"9"},{label:"TranaportCarFuel",value:"10"}]})}),e.jsx(l,{label:"Comment",children:e.jsx(v,{value:s,onChange:A})}),e.jsx(l,{label:"Could have been avoided",children:e.jsx(_,{onChange:({detail:t})=>k(t.checked),checked:u,children:"Yes"})}),e.jsx(l,{label:"Entry Date",children:e.jsx(J,{onChange:({detail:t})=>{console.log("calendar:",t),E(t.value)},value:c})})]})})})})]})}function K(){const[s,n]=a.useState(N.Light),r={tokens:{colorBackgroundLayoutMain:{light:"white",dark:"blue"},colorTextAccent:"#0073bb"},contexts:{"top-navigation":{tokens:{colorBackgroundContainerContent:"#1e324f"}}}};return a.useEffect(()=>{V(s),Y({theme:r})},[s]),e.jsx(e.Fragment,{children:e.jsx(q,{})})}function Q(){const s=I();return e.jsx(z,{items:[{text:"Dashboard",href:j.path},{text:"Add expense",href:`${j.path}/add`}],expandAriaLabel:"Show path",ariaLabel:"Breadcrumbs",onFollow:n=>{n.detail.external||(n.preventDefault(),s(n.detail.href))}})}function oe(){return e.jsx($,{content:e.jsx(K,{}),breadcrumbs:e.jsx(Q,{})})}export{oe as default};
