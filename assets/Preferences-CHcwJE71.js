import{j as e,A,D as m,r,S as l,H as j,$ as p,C as b,bP as B,f as E,B as h,bA as T,b as V,c as x}from"./index-BNmEPKmQ.js";import{L as k}from"./Layout-B9Wg1Dw_.js";import{S as f}from"./index-CBO8KeFk.js";import"./use-select--nlNNOp5.js";function w(n){const s=r.useContext(p);if(!s)throw new Error("UserContext context is not present");const{defaultTheme:i,defaultDensity:a,defaultCurrency:o}=s;return e.jsx(e.Fragment,{children:n.isVisible&&e.jsx(b,{children:e.jsx(B,{columns:1,items:[{label:"Currency",value:o.label},{label:"Default theme",value:i.label},{label:"Layout density",value:a.label},{label:"",value:e.jsx(E,{textAlign:"right",variant:"p",children:e.jsx(h,{onClick:n.editHandler,children:"Edit"})})}]})})})}function L(n){const s=r.useContext(T),{preferencesService:i}=s,a=r.useContext(p),{defaultTheme:o,themeOptions:C,setDefaultTheme:y,defaultCurrency:v,setDefaultCurrency:D,currencyOptions:S,densityOptions:g,setDefaultDensity:F}=a,[c,P]=r.useState(v),[u,H]=r.useState(o),[d,O]=r.useState({label:"Comfortable",value:"normal"}),z=async()=>{const t=await i.getPreferences();i.updatePreferences({preferencesId:t.preferencesId,theme:u.value,layoutDensity:d.value,currency:c.value}),y(u),F(d),D(c),n.saveHandler()};return e.jsx(e.Fragment,{children:n.isVisible&&e.jsx("form",{onSubmit:t=>t.preventDefault(),children:e.jsx(V,{actions:e.jsxs(l,{direction:"horizontal",size:"xs",children:[e.jsx(h,{formAction:"none",variant:"link",onClick:n.cancelHandler,children:"Cancel"}),e.jsx(h,{variant:"primary",onClick:z,children:"Save"})]}),children:e.jsx(b,{header:e.jsx(j,{variant:"h2",children:"General configuration"}),children:e.jsxs(l,{direction:"vertical",size:"l",children:[e.jsx(x,{label:"Currency",children:e.jsx(f,{selectedOption:c,onChange:({detail:t})=>{P(t.selectedOption)},options:S})}),e.jsx(x,{label:"Default Theme",children:e.jsx(f,{selectedOption:u,onChange:({detail:t})=>H(t.selectedOption),options:C})}),e.jsx(x,{label:"Default Layout Density",children:e.jsx(f,{selectedOption:d,onChange:({detail:t})=>O(t.selectedOption),options:g})})]})})})})})}function G(){const[n,s]=r.useState(!1),[i,a]=r.useState(!0);return e.jsxs(l,{size:"m",children:[e.jsx(j,{variant:"h1",actions:e.jsx(l,{direction:"horizontal",size:"xs"}),children:"Preferences"}),e.jsxs(l,{direction:"vertical",size:"l",children:[e.jsx(w,{isVisible:i,editHandler:()=>{s(!0),a(!1)}}),e.jsx(L,{isVisible:n,saveHandler:()=>{s(!1),a(!0)},cancelHandler:()=>{s(!1),a(!0)}})]})]})}function I(){return e.jsx(A,{items:[{text:"Dashboard",href:"/"+m.path},{text:"Preferences",href:`${m.path}/preferences`}]})}function q(){return e.jsx(e.Fragment,{children:e.jsx(k,{content:e.jsx(G,{}),breadcrumbs:e.jsx(I,{})})})}export{q as default};
