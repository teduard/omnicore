import{j as e,bD as E,bE as B,A as w,D as m,r,S as l,H as j,_ as p,C as b,bO as A,f as T,B as h,bz as V,b as k,c as x}from"./index-D5ZTpl4d.js";import{L}from"./Layout-CTKDL5F1.js";import{S as f}from"./index-CvlSTGqc.js";import"./use-select-seJ8svN_.js";const G=new B;function I(n){const s=r.useContext(p);if(!s)throw new Error("UserContext context is not present");const{defaultTheme:i,defaultDensity:a,defaultCurrency:o}=s;return e.jsx(e.Fragment,{children:n.isVisible&&e.jsx(b,{children:e.jsx(A,{columns:1,items:[{label:"Currency",value:o.label},{label:"Default theme",value:i.label},{label:"Layout density",value:a.label},{label:"",value:e.jsx(T,{textAlign:"right",variant:"p",children:e.jsx(h,{onClick:n.editHandler,children:"Edit"})})}]})})})}function Q(n){const s=r.useContext(V),{preferencesService:i}=s,a=r.useContext(p),{defaultTheme:o,themeOptions:C,setDefaultTheme:y,defaultCurrency:v,setDefaultCurrency:D,currencyOptions:S,densityOptions:g,setDefaultDensity:F}=a,[c,O]=r.useState(v),[u,P]=r.useState(o),[d,H]=r.useState({label:"Comfortable",value:"normal"}),z=async()=>{const t=await i.getPreferences();i.updatePreferences({preferencesId:t.preferencesId,theme:u.value,layoutDensity:d.value,currency:c.value}),y(u),F(d),D(c),n.saveHandler()};return e.jsx(e.Fragment,{children:n.isVisible&&e.jsx("form",{onSubmit:t=>t.preventDefault(),children:e.jsx(k,{actions:e.jsxs(l,{direction:"horizontal",size:"xs",children:[e.jsx(h,{formAction:"none",variant:"link",onClick:n.cancelHandler,children:"Cancel"}),e.jsx(h,{variant:"primary",onClick:z,children:"Save"})]}),children:e.jsx(b,{header:e.jsx(j,{variant:"h2",children:"General configuration"}),children:e.jsxs(l,{direction:"vertical",size:"l",children:[e.jsx(x,{label:"Currency",children:e.jsx(f,{selectedOption:c,onChange:({detail:t})=>{O(t.selectedOption)},options:S})}),e.jsx(x,{label:"Default Theme",children:e.jsx(f,{selectedOption:u,onChange:({detail:t})=>P(t.selectedOption),options:C})}),e.jsx(x,{label:"Default Layout Density",children:e.jsx(f,{selectedOption:d,onChange:({detail:t})=>H(t.selectedOption),options:g})})]})})})})})}function R(){const[n,s]=r.useState(!1),[i,a]=r.useState(!0);return e.jsxs(l,{size:"m",children:[e.jsx(j,{variant:"h1",actions:e.jsx(l,{direction:"horizontal",size:"xs"}),children:"Preferences"}),e.jsxs(l,{direction:"vertical",size:"l",children:[e.jsx(I,{isVisible:i,editHandler:()=>{s(!0),a(!1)}}),e.jsx(Q,{isVisible:n,saveHandler:()=>{s(!1),a(!0)},cancelHandler:()=>{s(!1),a(!0)}})]})]})}function U(){return e.jsx(w,{items:[{text:"Dashboard",href:"/"+m.path},{text:"Preferences",href:`${m.path}/preferences`}]})}function J(){return e.jsx(e.Fragment,{children:e.jsx(E,{client:G,children:e.jsx(L,{content:e.jsx(R,{}),breadcrumbs:e.jsx(U,{})})})})}export{J as default};
