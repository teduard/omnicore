import{R as t,m as Ne,M as Pe,t as Be,r as p,y as N,J as P,n as ke,o as $e,N as qe,v as Ke,u as je,bO as ze,w as He,a as Je}from"./index-C3RXUv3R.js";import{u as Ue,p as We,a as Ge,b as Qe,F as Xe,T as Ye,c as Ze,d as et,V as tt,P as nt,D as K,e as ot}from"./use-select-b3NgfctH.js";const at={root:"awsui_root_r2vco_1yzpb_145"},lt=t.forwardRef(({options:a,filteringType:l="none",filteringPlaceholder:w,filteringAriaLabel:b,filteringClearAriaLabel:L,filteringResultsText:n,inlineLabelText:f,ariaRequired:g,placeholder:h,disabled:s,readOnly:c,ariaLabel:x,statusType:e="finished",empty:E,loadingText:I,finishedText:j,errorText:z,noMatch:H,triggerVariant:J="label",renderHighlightedAriaLive:U,selectedOption:v,onBlur:W,onFocus:G,onLoadItems:C,onChange:Q,virtualScroll:X,expandToViewport:Y,autoFocus:Z,__inFilteringToken:B,__internalRootRef:ee,renderOption:k,...d},te)=>{var D;const $=Ne(d),A=Pe(d),F=Be("select"),ne=F("errorIconAriaLabel",d.errorIconAriaLabel),oe=F("selectedAriaLabel",d.selectedAriaLabel),ae=F("recoveryText",d.recoveryText);d.recoveryText;const{handleLoadMore:le,handleRecoveryClick:re,fireLoadItems:ie}=Ue({onLoadItems:C,options:a,statusType:e}),[m,se]=p.useState(""),{filteredOptions:r,parentMap:ce,totalCount:de,matchesCount:ue}=We(a,l,m),pe=p.useRef(null),ge=p.useRef(null),he=N("trigger"),T=(D=A.controlId)!==null&&D!==void 0?D:he,M=p.useRef(null),{isOpen:u,highlightType:be,highlightedOption:y,highlightedIndex:q,getTriggerProps:fe,getDropdownProps:ve,getFilterProps:me,getMenuProps:ye,getOptionProps:Oe,highlightOption:Se,selectOption:Re,announceSelected:we,focusActiveRef:Le}=Ge({selectedOptions:v?[v]:[],updateSelectedOption:o=>Ke(Q,{selectedOption:o}),options:r,filteringType:l,onBlur:W,onFocus:G,externalRef:te,fireLoadItems:ie,setFilteringValue:se,statusType:e}),xe=Qe({isEnabled:l==="none"&&!c,options:r,highlightOption:u?Se:Re,highlightedOption:u?y?.option:v}),O=N("select-arialabel-"),S=N("footer");p.useEffect(()=>{var o;(o=M.current)===null||o===void 0||o.call(M,q)},[q]);const Ee=t.createElement(Xe,{clearAriaLabel:L,filteringType:l,placeholder:w,ariaLabel:b,ariaRequired:g,value:m,...me()}),Ie=t.createElement(Ye,{renderOption:k,ref:ge,placeholder:h,disabled:s,readOnly:c,triggerVariant:J,triggerProps:fe(s,Z),selectedOption:v,isOpen:u,inFilteringToken:B,inlineLabelText:f,...A,controlId:T,ariaLabelledby:P(A.ariaLabelledby,O)}),Ce=!a||a.length===0,De=r&&r.length===0,Ae=l!=="none"&&m.length>0&&r&&r.length>0?n?.(ue,de):void 0,i=Ze({statusType:e,empty:E,loadingText:I,finishedText:j,errorText:z,recoveryText:ae,isEmpty:Ce,isNoMatch:De,noMatch:H,filteringResultsText:Ae,errorIconAriaLabel:ne,onRecoveryClick:()=>{re(),Le()},hasRecoveryCallback:!!C}),Fe={...ye(),onLoadMore:le,ariaLabelledby:P(O,T),ariaDescribedby:i.content?S:void 0},Te=et({announceSelected:we,highlightedOption:y,getParent:o=>{var R;return(R=ce.get(o))===null||R===void 0?void 0:R.option},selectedAriaLabel:oe,renderHighlightedAriaLive:U}),Me=X?tt:nt,Ve=o=>{o.target!==document.activeElement&&o.preventDefault()},_e=ke(pe,ee),V=ve(),_=p.useRef(a.length>0);return _.current=_.current||a.length>0,t.createElement("div",{...$,ref:_e,className:$e(at.root,$.className),onKeyDown:xe},t.createElement(qe,{...V,ariaLabelledby:V.dropdownContentRole?P(O,T):void 0,ariaDescribedby:V.dropdownContentRole&&i.content?S:void 0,open:u,stretchTriggerHeight:!!B,stretchBeyondTriggerWidth:!0,trigger:Ie,header:Ee,onMouseDown:Ve,footer:i.isSticky?t.createElement(K,{content:u?i.content:null,id:S}):null,expandToViewport:Y,contentKey:_.current.toString(),content:t.createElement(Me,{listBottom:i.isSticky?null:t.createElement(K,{content:u?i.content:null,id:S}),renderOption:k,menuProps:Fe,getOptionProps:Oe,filteredOptions:r,filteringValue:m,ref:M,hasDropdownStatus:i.content!==null,screenReaderContent:Te,highlightType:be})}),t.createElement("div",{hidden:!0,id:O},x||f))}),rt=t.forwardRef(({options:a=[],filteringType:l="none",statusType:w="finished",triggerVariant:b="label",renderOption:L,...n},f)=>{var g,h,s,c;const x=je("Select",{props:{autoFocus:n.autoFocus,expandToViewport:n.expandToViewport,filteringType:l,triggerVariant:b,virtualScroll:n.virtualScroll,readOnly:n.readOnly},metadata:{hasInlineLabel:!!n.inlineLabelText,hasDisabledReasons:a.some(I=>!!I.disabledReason)}}),e=ze(n),E={name:"awsui.Select",label:`.${ot["button-trigger"]}`,properties:{disabled:`${!!e.disabled}`,selectedOptionValue:`${e.selectedOption&&e.selectedOption.value?e.selectedOption.value:null}`,selectedOption:`${(c=(h=(g=e.selectedOption)===null||g===void 0?void 0:g.label)!==null&&h!==void 0?h:(s=e.selectedOption)===null||s===void 0?void 0:s.value)!==null&&c!==void 0?c:null}`}};return t.createElement(lt,{renderOption:L,options:a,filteringType:l,statusType:w,triggerVariant:b,...e,...x,ref:f,...He({component:E})})});Je(rt,"Select");export{rt as S};
